{
  "working_directory": "../",
  "fail_fast": true,
  "steps": [
    {
      "name": "Generate seed SQL",
      "command": "node .mcp/mtm-workflow/dist/tools/generate-test-seed-sql.js --config_file .mcp/samples/seed-config.sample.json --output_sql .mcp/artifacts/seed.sql",
      "cwd": "../",
      "shell": true
    },
    {
      "name": "Apply seed SQL",
      "command": "cmd /c \"mysql --host=127.0.0.1 --port=3306 --user=root --password=root --database=mtm_wip_application_winforms_test < .mcp/artifacts/seed.sql\"",
      "cwd": "../",
      "shell": true
    },
    {
      "name": "Install stored procedures",
      "command": "node .mcp/mtm-workflow/dist/tools/install-stored-procedures.js --config_file .mcp/samples/stored-procedure-install.sample.json",
      "cwd": "../",
      "shell": true
    },
    {
      "name": "Validate schema",
      "command": "node .mcp/mtm-workflow/dist/tools/validate-schema.js --config_file .mcp/samples/schema-validate.sample.json",
      "cwd": "../",
      "shell": true
    },
    {
      "name": "Run DAO integration tests",
      "command": "dotnet test Tests/Integration/Tests.Integration.csproj --filter Category=DAO",
      "cwd": "../",
      "shell": true
    },
    {
      "name": "Cleanup audit",
      "command": "node .mcp/mtm-workflow/dist/tools/audit-database-cleanup.js --config_file .mcp/samples/cleanup-audit.sample.json --dry_run true",
      "cwd": "../",
      "shell": true,
      "continueOnFailure": true
    },
    {
      "name": "Verify seed state",
      "command": "node .mcp/mtm-workflow/dist/tools/verify-test-seed.js --config_file .mcp/samples/seed-config.sample.json",
      "cwd": "../",
      "shell": true,
      "continueOnFailure": true
    }
  ]
}
